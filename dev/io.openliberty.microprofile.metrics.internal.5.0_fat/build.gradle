/*******************************************************************************
 * Copyright (c) 2023 IBM Corporation and others.
 * All rights reserved. This program and the accompanying materials
 * are made available under the terms of the Eclipse Public License 2.0
 * which accompanies this distribution, and is available at
 * http://www.eclipse.org/legal/epl-2.0/
 * 
 * SPDX-License-Identifier: EPL-2.0
 *
 * Contributors:
 *     IBM Corporation - initial API and implementation
 *******************************************************************************/
	
configurations {
	  prometheusRegistry
	  micrometerCore
	  hdrHistogram
}
	
dependencies {
  prometheusRegistry 'io.micrometer:micrometer-registry-prometheus:1.9.3'
  micrometerCore 'io.micrometer:micrometer-core:1.9.3'
  hdrHistogram 'org.hdrhistogram:HdrHistogram:2.1.12'
}

task copyPrometheus(type: Copy) {
  shouldRunAfter jar
  from configurations.prometheusRegistry
  into new File(autoFvtDir, 'publish/shared/resources/prometheuslib/')
}


task copyHdrHistogramUseless(type: Copy) {
  shouldRunAfter jar
  from configurations.hdrHistogram
  into new File(autoFvtDir, 'publish/shared/resources/uselessLib/')
}

task copyMicrometerCore(type: Copy) {
  shouldRunAfter jar
  from configurations.micrometerCore
  into new File(autoFvtDir, 'publish/shared/resources/micrometercore/')
}

 addRequiredLibraries {
  dependsOn copyMicrometerCore
  dependsOn copyPrometheus
  dependsOn copyHdrHistogramUseless
}